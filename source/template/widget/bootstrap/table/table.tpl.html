<?php
/***************************************************************************
 *   Copyright (C) by Georgiy T. Kutsurua                                  *
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU Lesser General Public License as        *
 *   published by the Free Software Foundation; either version 3 of the    *
 *   License, or (at your option) any later version.                       *
 ***************************************************************************/


/**
 * $columns - Название колонок
 * $rows - Строки
 * $isMain - Отстроить главную таблицу ( часть таблицы для вставки ajax-ом ) используется для кнопки "загрузить еще"
 * $nextHref - url по котрому можно заьрать след порцию таблицы
 * $caption - Заголовок таблицы
 */

$keys = array_keys($columns);
?>
<? if($isMain === true): ?>
<table class="table table-striped">
	<? if(isset($caption) && $caption): ?>
		<caption><?=$caption; ?></caption>
	<? endif; ?>
	<thead>
		<tr>
		<? foreach($columns as $column): ?>
			<th><?=$column; ?></th>
		<? endforeach; ?>
		</tr>
	</thead>
	<tfoot>
	<? if(isset($nextHref) && $nextHref): ?>
		<tr>
			<td colspan="<?=count($keys); ?>">
				<button class="btn btn-large next-load" data-loading-text="<?=_('Идет загрузка ...'); ?>" href="<?=$nextHref; ?>"><?=_('Загрузить еще'); ?></button>
			</td>
		</tr>
	<? endif; ?>
	</tfoot>
	<tbody>
	<? foreach($rows as $row): ?>
			<tr>
				<? foreach($keys as $key): ?>
				<td><?=$row[$key]; ?></td>
				<? endforeach; ?>
			</tr>
	<? endforeach; ?>
	</tbody>
</table>

<? else: ?>

<? foreach($rows as $row): ?>
		<tr>
			<? foreach($row as $column): ?>
			<td><?=$column; ?></td>
			<? endforeach; ?>
		</tr>
<? endforeach; ?>

<? endif; ?>


